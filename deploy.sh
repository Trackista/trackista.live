#!/bin/bash

# ๐ ะกะบัะธะฟั ะดะตะฟะปะพั TrackIsta ะฝะฐ ัะดะฐะปะตะฝะฝัะน ัะตัะฒะตั

set -e

echo "๐ฅ TrackIsta Deployment Script"
echo "=============================="

# ะัะพะฒะตััะตะผ ะทะฐะฒะธัะธะผะพััะธ
if ! command -v npm &> /dev/null; then
    echo "โ npm ะฝะต ัััะฐะฝะพะฒะปะตะฝ"
    exit 1
fi

# ะฃััะฐะฝะฐะฒะปะธะฒะฐะตะผ ะทะฐะฒะธัะธะผะพััะธ
echo "๐ฆ ะฃััะฐะฝะพะฒะบะฐ ะทะฐะฒะธัะธะผะพััะตะน..."
npm install

# ะกะพะฑะธัะฐะตะผ ะฟัะพะตะบั
echo "๐๏ธ  ะกะฑะพัะบะฐ ะฟัะพะตะบัะฐ..."
npm run build

# ะัะพะฒะตััะตะผ ััะพ ัะฑะพัะบะฐ ะฟัะพัะปะฐ ััะฟะตัะฝะพ
if [ ! -d "dist" ]; then
    echo "โ ะัะธะฑะบะฐ ัะฑะพัะบะธ - ะฟะฐะฟะบะฐ dist ะฝะต ัะพะทะดะฐะฝะฐ"
    exit 1
fi

echo "โ ะกะฑะพัะบะฐ ะทะฐะฒะตััะตะฝะฐ ััะฟะตัะฝะพ!"
echo "๐ ะคะฐะนะปั ะดะปั ะดะตะฟะปะพั ะฝะฐัะพะดัััั ะฒ ะฟะฐะฟะบะต: dist/"
echo ""
echo "๐ ะกะพะดะตัะถะธะผะพะต dist/:"
ls -la dist/

echo ""
echo "๐ ะะพัะพะฒะพ ะบ ะดะตะฟะปะพั!"
echo "๐ก ะกะบะพะฟะธััะนัะต ัะพะดะตัะถะธะผะพะต ะฟะฐะฟะบะธ dist/ ะฝะฐ ะฒะฐั ะฒะตะฑ-ัะตัะฒะตั"
echo ""
echo "๐ ะะพะดัะพะฑะฝัะต ะธะฝััััะบัะธะธ: DEPLOY.md"